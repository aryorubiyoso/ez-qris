<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sidebar with Bootstrap 5.3</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="assets/css/ezQRIS.css" />
  </head>
  <body>
    <!-- Sidebar -->
    <div class="sidebar d-flex flex-column">
      <a href="#" data-bs-toggle="offcanvas" data-bs-target="#sidebarOffcanvas" aria-controls="sidebarOffcanvas">
        <div class="logo">
          <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" class="bi bi-qr-code-scan" viewBox="0 0 16 16">
            <path d="M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5M.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5M4 4h1v1H4z" />
            <path d="M7 2H2v5h5zM3 3h3v3H3zm2 8H4v1h1z" />
            <path d="M7 9H2v5h5zm-4 1h3v3H3zm8-6h1v1h-1z" />
            <path d="M9 2h5v5H9zm1 1v3h3V3zM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8zm2 2H9V9h1zm4 2h-1v1h-2v1h3zm-4 2v-1H8v1z" />
            <path d="M12 9h2V8h-2z" />
          </svg>
          <span>ezQRIS</span>
        </div>
      </a>
      <nav class="nav flex-column">
        <a class="nav-link selected" href="#"><i class="bi bi-house-door"></i><span>Home</span></a>
        <a class="nav-link" href="#"><i class="bi bi-qr-code-scan"></i><span>Buat Transaksi</span></a>
        <a class="nav-link" href="#"><i class="bi bi-graph-up"></i><span>Histori Transaksi</span></a>
        <a class="nav-link" href="#"><i class="bi bi-gear-wide-connected"></i><span>Pengaturan</span></a>
        <a class="nav-link text-danger" href="#"><i class="bi bi-box-arrow-left"></i><span>Keluar</span></a>
        <a class="nav-link" href="#" data-bs-toggle="offcanvas" data-bs-target="#sidebarOffcanvas" aria-controls="sidebarOffcanvas"> <i class="bi bi-arrow-right-circle"></i><span>Expand</span> </a>
      </nav>
    </div>

    <!-- Offcanvas Sidebar -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarOffcanvas" aria-labelledby="sidebarOffcanvasLabel">
      <div class="offcanvas-header">
        <div class="logo">
          <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" class="bi bi-qr-code-scan" viewBox="0 0 16 16">
            <path d="M0 .5A.5.5 0 0 1 .5 0h3a.5.5 0 0 1 0 1H1v2.5a.5.5 0 0 1-1 0zm12 0a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0V1h-2.5a.5.5 0 0 1-.5-.5M.5 12a.5.5 0 0 1 .5.5V15h2.5a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5v-3a.5.5 0 0 1 .5-.5m15 0a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1 0-1H15v-2.5a.5.5 0 0 1 .5-.5M4 4h1v1H4z" />
            <path d="M7 2H2v5h5zM3 3h3v3H3zm2 8H4v1h1z" />
            <path d="M7 9H2v5h5zm-4 1h3v3H3zm8-6h1v1h-1z" />
            <path d="M9 2h5v5H9zm1 1v3h3V3zM8 8v2h1v1H8v1h2v-2h1v2h1v-1h2v-1h-3V8zm2 2H9V9h1zm4 2h-1v1h-2v1h3zm-4 2v-1H8v1z" />
            <path d="M12 9h2V8h-2z" />
          </svg>
          <h5 class="offcanvas-title mx-1" id="sidebarOffcanvasLabel">ezQRIS</h5>
        </div>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <nav class="nav flex-column d-flex">
          <a class="nav-link selected" href="#"><i class="bi bi-house-door"></i>Home</a>
          <a class="nav-link" href="#"><i class="bi bi-qr-code-scan"></i>Buat Transaksi</a>
          <a class="nav-link" href="#"><i class="bi bi-graph-up"></i>Histori Transaksi</a>
          <a class="nav-link" href="#"><i class="bi bi-gear-wide-connected"></i>Pengaturan</a>
          <a class="nav-link text-danger" href="#"><i class="bi bi-box-arrow-left"></i>Keluar</a>
        </nav>
      </div>
    </div>

    <!-- Main content of the apps -->
    <div class="content justify-content-center align-items-center min-vh-100">
      <div class="container">
        <div class="d-inline">
          <div class="row row-cols-auto">
            <div class="col">
              <img src="assets/img/profile.png" alt="" class="img-thumbnail rounded-circle" width="75px" />
            </div>
            <div class="col">
              <figure>
                <blockquote class="blockquote">
                  <h3>Welcome, Jonatan Damian!</h3>
                </blockquote>
                <figcaption class="blockquote-footer">ID: 7736659276<i class="bi bi-copy ms-2"></i></figcaption>
              </figure>
            </div>
          </div>
        </div>
      </div>

      <div class="card mt-3 w-100">
        <div class="card-header">Total Transaksi Hari Ini</div>
        <div class="card-body">
          <h2 class="card-title">Rp. 100.000,00</h2>
          <p class="card-text"><small>Last Update: 20:06PM</small></p>
          <a href="#" class="btn btn-primary">Details</a>
        </div>
      </div>
      <div class="container text-center pt-2">
        <h2>Create QRIS</h2>
      </div>
      <div class="transaction-container">
        <!-- Text Input -->
        <div class="mb-3">
          <input type="text" class="form-control text-center" id="dial-input" readonly placeholder="Rp. 0,00" />
        </div>
        <!-- Dialpad -->
        <div class="dialpad">
          <div class="row g-2">
            <div class="col-4">
              <button class="btn btn-primary dial-btn" aria-label="Number 1">1</button>
            </div>
            <div class="col-4">
              <button class="btn btn-primary dial-btn" aria-label="Number 2">2</button>
            </div>
            <div class="col-4">
              <button class="btn btn-primary dial-btn" aria-label="Number 3">3</button>
            </div>
            <div class="col-4">
              <button class="btn btn-primary dial-btn" aria-label="Number 4">4</button>
            </div>
            <div class="col-4">
              <button class="btn btn-primary dial-btn" aria-label="Number 5">5</button>
            </div>
            <div class="col-4">
              <button class="btn btn-primary dial-btn" aria-label="Number 6">6</button>
            </div>
            <div class="col-4">
              <button class="btn btn-primary dial-btn" aria-label="Number 7">7</button>
            </div>
            <div class="col-4">
              <button class="btn btn-primary dial-btn" aria-label="Number 8">8</button>
            </div>
            <div class="col-4">
              <button class="btn btn-primary dial-btn" aria-label="Number 9">9</button>
            </div>
            <div class="col-4">
              <button class="btn btn-primary dial-btn" aria-label="Asterisk">*</button>
            </div>
            <div class="col-4">
              <button class="btn btn-primary dial-btn" aria-label="Number 0">0</button>
            </div>
            <div class="col-4">
              <button class="btn btn-primary dial-btn" aria-label="Thousand">000</button>
            </div>
          </div>
        </div>
        <!-- Action Buttons -->
        <div class="mt-3 d-flex justify-content-between">
          <button class="btn btn-secondary action-btn" id="reset-btn">Reset</button>
          <button class="btn btn-primary action-btn" id="generate-qris-btn">Generate QRIS</button>
        </div>
        <!-- QR Code Output -->
        <div id="qrcode" class="mt-3 text-center"></div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <script>
      const dialButtons = document.querySelectorAll(".dial-btn");
      const dialInput = document.getElementById("dial-input");
      const resetBtn = document.getElementById("reset-btn");
      const generateQrisBtn = document.getElementById("generate-qris-btn");
      const qrcodeDiv = document.getElementById("qrcode");
      let inputValue = "";

      // Format input as Indonesian currency
      function formatCurrency(value) {
        if (!value) return "Rp. 0,00";
        const num = parseInt(value.replace(/\D/g, "")); // Remove non-digits
        const formatted = num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
        return `Rp. ${formatted},00`;
      }

      // Handle dial button clicks
      dialButtons.forEach((button) => {
        button.addEventListener("click", () => {
          const char = button.textContent;
          if (/[0-9]/.test(char)) {
            // Only accept numbers
            inputValue += char;
            dialInput.value = formatCurrency(inputValue);
          }
        });
      });

      // Handle reset button
      resetBtn.addEventListener("click", () => {
        inputValue = "";
        dialInput.value = "Rp. 0,00";
        qrcodeDiv.innerHTML = "";
      });

      // Handle generate QRIS button
      generateQrisBtn.addEventListener("click", () => {
        if (inputValue) {
          qrcodeDiv.innerHTML = "";
          QRCode.toCanvas(inputValue, { errorCorrectionLevel: "H" }, (err, canvas) => {
            if (err) throw err;
            qrcodeDiv.appendChild(canvas);
          });
        }
      });
    </script>
  </body>
</html>
